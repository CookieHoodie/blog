[{"content":"Introduction I go on at least one trip every year, and one of the biggest expenses is always the accommodation. Imagine you spend $200 dollars per night for 10 days ‚Äî $2000 in total. Imagine again you know the trick to save 15% to 20% on each booking ‚Äî that is $300 to $400 dollars saved! In this article, I\u0026rsquo;m going to show you exactly how to find such deals, and it\u0026rsquo;s simpler than you think.\nStep 1: Google Hotels Google Hotels is super convenient and I especially love the map view which makes it easy to see where exactly I will be staying. Most importantly, it shows the price across different sites like Agoda, Expedia, etc., which makes price comparison much easier. I can usually find a cheaper price here than searching on other websites.\nQuick tip: Always click into the official hotel website (if any), sometimes official has the best deal!\nOnce you have identify a hotel you like, you can start looking for discounts.\nStep 2: Apply Easy 15%-20% Hacks 1. Agoda Hacks (My Favorite) Agoda is weird ‚Äî clicking the link through Google Hotels can have a different price than searching directly on Agoda; searching on Agoda mobile app can be cheaper/more expensive; most importantly, there are various credit card affiliated Agoda links that would instantly give you 15% - 20% discounts!\nMy favorite keywords which almost always work are:\nAgoda 20/18/15 off Agoda citibank Agoda mastercard You can also try other keywords like:\nAgoda HSBC 20 Agoda UOB etc. Here are the results through different ways of searching.\nNormal search on Agoda (Bad) Keyword: Agoda 20 off ‚Üí instant 12% off with Mastercard Keyword: Agoda citibank ‚Üí instant 16% off with Citibank Note that for credit card affiliated links, you will actually need an eligible credit card for the discounts. You can easily apply for one and it usually comes with no cost.\nPitfalls Although Agoda gives good savings most of the time, beware that it is not always the cheapest. Avoid pay later ‚Äî you will be slapped with a 5% surcharge. Google online and you will find various complaints online about this hidden charge. (However, as of Nov 2025, I don\u0026rsquo;t see the mentioned of hidden charge in Agoda\u0026rsquo;s T\u0026amp;C anymore, perhaps they have finally found their conscience.) 2. Other Credit Card Deals Keep a look out for ongoing credit card deals ‚Äî there are usually some discounts going on at any moment of time! What I would do is usually doing some random keyword search in the format of \u0026ldquo;\u0026lt;platform\u0026gt; \u0026lt;credit card\u0026gt; discounts\u0026rdquo;. For example, this was how I got 20% off Klook:\nSummary There are a lot of deals out there for booking hotels if you know where to look. Never lose out on easy savings again!\n","permalink":"https://cookiehoodie.github.io/blog/posts/sg-money-hacks/cheaper-hotels/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eI go on at least one trip every year, and one of the biggest expenses is always the accommodation. Imagine you spend $200 dollars per night for 10 days ‚Äî $2000 in total. Imagine again you know the trick to save 15% to 20% on each booking ‚Äî that is $300 to $400 dollars saved! In this article, I\u0026rsquo;m going to show you exactly how to find such deals, and it\u0026rsquo;s simpler than you think.\u003c/p\u003e","title":"Booking Hotels - Quick Tip for Extra 15%-20% Off"},{"content":"2025 Update: Keychron has officially arrived in Singapore, so the price difference may not be as much anymore, but getting directly from the US site can still be a better deal!\nTL;DR You can buy Keychron directly from their US official website and ship to Singapore without any extra tax!\nIntroduction Keychron keyboards sold by dealers in Singapore are usually more expensive than the price on Keychron\u0026rsquo;s official website, not to mention Keychron often has sales that makes the price difference even more stark.\nFor example, as of 12 May 2023, the official price of Keychron K8 RGB aluminum Hot-Swappable costs ~101.82 SGD: While the same model on Shopee costs 135 SGD: Granted, you need to add an extra 10 USD for the shipping fee if you buy from the official store, but in this case it\u0026rsquo;s still cheaper than buying from dealers.\nExtra Charges? However, it\u0026rsquo;s unclear if there would be any extra charges like import tax since it\u0026rsquo;s shipping from overseas to Singapore. Keychron\u0026rsquo;s shipping policy says that:\nDue to the customs policy of different destinations, we CANNOT guarantee if there is a tax for you. Our product price does not include VAT or import tax of your shipping destination.\nBut it adds that:\nFrom our previous experience, the following destinations haven‚Äôt been charged for import tax including the U.S, Singapore, South Korea and other EU (except remote area) such as Austria, Belgium, Bulgaria, Croatia, Czech Republic, Denmark, Estonia, Finland, France, Germany, Hungary, Ireland, Italy, Latvia, Luxembourg, the Netherlands, Poland, Portugal, Slovakia, Slovenia, Spain, Sweden, United Kingdom\nThe ambiguity adds uncertainty to the final price, but I decided to try my luck since the deal is too good to pass.\nThe Process Buying When buying, I put my Singapore address as the shipping address, and my Singapore phone number as the contact number. Nothing too fancy.\nI used my DBS multi-currency card (with sufficient USD inside) to pay so that it charges exactly the amount in USD without any conversion fee.\nShipping The keyboard was shipped out 2 business day later.\nReceiving It only took 5 business days (one week) for the keyboard to arrive after it was shipped out.\nAnd that\u0026rsquo;s it, no extra fee or tax imposed when receiving the keyboard!\nSummary There is no extra tax if you buy Keychron from the official website and ship it to Singapore, at least from my experience as of 2023. If your country is on the above list mentioned, chances are you could safely assume that there\u0026rsquo;d be no import tax as well.\nHope this helps those of you who hesitate to buy from the official store due to the import tax. Cheers!\n","permalink":"https://cookiehoodie.github.io/blog/posts/sg-money-hacks/keychron-singapore/","summary":"\u003cp\u003e\u003cem\u003e\u003cstrong\u003e2025 Update:\u003c/strong\u003e Keychron has \u003ca href=\"https://www.keychronsg.com/\"\u003eofficially arrived in Singapore\u003c/a\u003e, so the price difference may not be as much anymore, but getting directly from the US site can still be a better deal!\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eTL;DR You can buy Keychron directly from their US official website and ship to Singapore without any extra tax!\u003c/strong\u003e\u003c/p\u003e\n\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eKeychron keyboards sold by dealers in Singapore are usually more expensive than the price on Keychron\u0026rsquo;s official website, not to mention Keychron often has sales that makes the price difference even more stark.\u003c/p\u003e","title":"Keychron Singapore - Quick Tip for 15% Off"},{"content":"Introduction Ever since I discovered Logseq, I have been using it as my daily note taking tool. It has a lot of powerful features, and if you think something is missing, you could easily find or write a plugin that suits your needs. In this post, I will show you how to write your own Logseq plugin.\nWe will be implementing a command that we could use in the Logseq editor. In particular, the command will fetch the current market price data of a stock from the internet and display it in the editor: Fun fact: I personally wrote and used this simple plugin to speed up my stock analysis workflow using Logseqüìà.\nLet\u0026rsquo;s get started!\nPrerequisites Before we begin, make sure that you have the following tools installed:\nLogseq Desktop App: https://logseq.com/downloads\nNode.js: https://nodejs.org/en/download\nIf you don\u0026rsquo;t want to download Node.js locally and clutter your device, check out how I use Docker with VSCode to solve that!\nGetting Started As of Logseq version 0.9.1, plugins are written using HTML, CSS, and JavaScript, similar to how you develop a website (or to be exact, a chrome extension). Here\u0026rsquo;s roughly how it works, quoting from the official documentation:\nCurrently, each plugin runs in an iframe separate from the main Logseq app. The main app provides some APIs (such as operations on the block, getting app settings) through the SDK to the plugins. The iframe serves as the plugin\u0026rsquo;s UI and can be shown or hidden through related APIs. What\u0026rsquo;s more, the main Logseq app provides ways to inject UI elements such as icons or buttons to some specific positions in the main app.\nThe command we will be implementing takes the form of TICKER /GetPrice. For example, running AAPL /GetPrice in Logseq will fetch the current market price of Apple stock and display it in the same block. Since it\u0026rsquo;s only a simple command, we will only use JavaScript without going into HTML and CSS.\nThe final code could be found in Resources at the end of the page.\nSetting up Logseq To be able to load our own plugin, we need to turn on developer mode in Logseq. To do so, click the three-dots menu, go to Settings \u0026gt; Advanced and turn on Developer Mode.\nWriting the Plugin First, create a new folder where we will write our plugin in. Navigate into the folder.\nCreate a file named package.json with the following content:\n1 2 3 4 5 6 7 8 9 10 11 { \u0026#34;name\u0026#34;: \u0026#34;Logseq Plugin Tutorial\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.1.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Plugin Tutorial\u0026#34;, \u0026#34;logseq\u0026#34;: { \u0026#34;main\u0026#34;: \u0026#34;dist/index.html\u0026#34; }, \u0026#34;scripts\u0026#34;: { \u0026#34;build\u0026#34;: \u0026#34;parcel build --public-url . --no-source-maps index.html\u0026#34; } } The name, version, and description fields specify the metadata of our plugin. The logseq.main field specifies the entrypoint of the plugin, which we will generate later.\nInstall the dependencies by running:\n1 2 npm install --save-dev @logseq/libs parcel npm install axios cheerio @logseq/libs is mandatory for developing Logseq plugin, parcel is required to build our project to be loaded into Logseq, while the other 2 are only required for the purpose of our plugin.\nCreate a file named index.html with the following content:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Logseq Plugin Tutorial\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;script src=\u0026#34;./index.js\u0026#34; type=\u0026#34;module\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; This file is where we could customize the UI of our plugin. But since we are not doing that, the important part here is the \u0026lt;script\u0026gt; tag, which loads and runs our code in index.js that we will create next.\nCreate a file named index.js with the following content:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 import \u0026#39;@logseq/libs\u0026#39;; import axios from \u0026#39;axios\u0026#39;; import * as cheerio from \u0026#39;cheerio\u0026#39;; // Retrieve content (ticker info) and block uuid from the current block. async function getTickerFromBlock() { const {content, uuid} = await logseq.Editor.getCurrentBlock(); const ticker = content.trim(); if (ticker === \u0026#34;\u0026#34;) { throw new Error(\u0026#34;Please specify the ticker name.\u0026#34;); } else if (ticker.split(\u0026#34; \u0026#34;, 2).length \u0026gt; 1) { throw new Error(`Ticker ${ticker} is not valid.`); } return {ticker: ticker, blockUUID: uuid}; } // webscrape roic.ai and get the stock price of the ticker async function getMarketPrice(ticker) { const response = await axios.request({method: \u0026#34;GET\u0026#34;, url: `https://roic.ai/classic/${ticker}`}); const $ = cheerio.load(response.data); // Hardcoded. Will stop working if the website layout changes! return $(`p:contains(\u0026#34;RECENT \u0026#34;)p:contains(\u0026#34;PRICE\u0026#34;)`).next().text(); } function main () { logseq.Editor.registerSlashCommand( \u0026#34;GetPrice\u0026#34;, async () =\u0026gt; { let tickerInfo = {}; try { tickerInfo = await getTickerFromBlock(); } catch (err) { await logseq.UI.showMsg(`${err.name} ${err.message}`, \u0026#34;error\u0026#34;); throw err; } try { const price = await getMarketPrice(tickerInfo.ticker); if (price === \u0026#34;\u0026#34;) { await logseq.UI.showMsg(\u0026#34;Can\u0026#39;t find the price info.\u0026#34;, \u0026#34;error\u0026#34;); } else { await logseq.Editor.updateBlock(tickerInfo.blockUUID, `Current market price: *${price}*`); } } catch (err) { await logseq.UI.showMsg(`${err.name} ${err.message}`, \u0026#34;error\u0026#34;); throw err; // throw otherwise the message will pop up multiple times. } } ) } logseq.ready(main).catch(console.error) In short, the above code:\nImport @Logseq/libs so that we could use the Logseq API. Register function main to execute when Logseq is ready by calling logseq.ready(main).catch(console.error). Register the command GetPrice, which when called will run the subsequent code to get the stock market price. Execute getTickerFromBlock() to get the content of the current block which the command is run. In our case, the content would be the stock ticker. Execute getMarketPrice(ticker) which makes a HTTP request to webscrape and retrieve the market price for the given ticker. Refer to the Logseq API to learn more about the different Logseq API calls used in the code.\nBuild the project by running:\n1 npm run build A dist/index.html will be generated. If you recall from step 1, this is the entrypoint of our plugin.\nIn the Logseq desktop application, click the three-dots menu, go to Plugins \u0026gt; Load unpacked plugin and select our project folder (i.e., where package.json is located).\nTest out the plugin by writing AAPL in an empty block and run the command /GetPrice in the same block to see the current market price!\nSome Notes After writing the ticker name, we might need to wait for about 1 second before running the command, otherwise an error may be thrown. This is because Logseq will only save the content of a block shortly after we stop typing. This means if we run the command too fast without giving it time to save, the content will not be captured by the logseq.Editor.getCurrentBlock() function call and thus give an error.\nSummary Logseq provides a powerful set of API that allows us to build useful plugins. There are a lot other things you could achieve with plugins through the same development process to customize your Logseq experience. By following the steps outlined in this blog, you can start creating your own plugins and exploring the full potential of Logseq.\nGive me a likeüëçif you find this useful!\nResources Code for this tutorial: https://github.com/CookieHoodie/tutorials/tree/main/logseq_plugin More plugin samples: https://github.com/logseq/logseq-plugin-samples Logseq API documentation: https://plugins-doc.logseq.com/ Official plugin tutorial: https://docs.logseq.com/#/page/plugins%20101 ","permalink":"https://cookiehoodie.github.io/blog/posts/tech/logseq-plugin/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eEver since I discovered \u003ca href=\"https://logseq.com/\"\u003eLogseq\u003c/a\u003e, I have been using it as my daily note taking tool. It has a lot of powerful features, and if you think something is missing, you could easily find or write a plugin that suits your needs. In this post, I will show you how to write your own Logseq plugin.\u003c/p\u003e\n\u003cp\u003eWe will be implementing a command that we could use in the Logseq editor. In particular, the command will fetch the current market price data of a stock from the internet and display it in the editor:\n\u003cimg alt=\"Demo GIF\" loading=\"lazy\" src=\"/blog/posts/tech/logseq-plugin/images/demo.gif\"\u003e\nFun fact: I personally wrote and used this simple plugin to speed up my stock analysis workflow using Logseqüìà.\u003c/p\u003e","title":"How to Create a Logseq Plugin"},{"content":"Introduction Recently, I opened a Webull Singapore account and the experience has been good so far. However, although the fee structure for deposits and withdrawals in SGD (with a Singapore bank account) is clearly stated, it\u0026rsquo;s not so clear on depositing/withdrawing other currencies like USD using a multi-currency account.\nSince Webull uses a DBS multi-currency account under the hood to hold our funds, supposedly if we deposit or withdraw USD using a DBS multi-currency account as well, there should be no charges. Sadly, there\u0026rsquo;s no official statement to verify the assumption, not to mention the scary \u0026ldquo;SGD20 charged by remitting bank for USD\u0026rdquo; mentioned on the official FAQ.\nRegardless, I eventually tried to deposit and withdraw using a DBS account, and it was indeed zero chargesüëè. In the following section, I will demonstrate how I did it so that you can be assured that it works.\nGetting Started Note that the below steps are only applicable for DBS multi-currency accounts in Singapore; there\u0026rsquo;s no guarantee that 0 fee would apply for multi-currency accounts from other banks.\nDeposit On the Webull mobile app, go to your account section and find Deposit \u0026gt; Telegraphic Transfer (TT) \u0026gt; USD. You should be able to see the account details that you should deposit your fund to, as shown below: Take note of the remarks as it will be needed later when making your deposit.\nThen, launch your DBS digibank app and go to \u0026ldquo;Pay \u0026amp; Transfer\u0026rdquo; section. Click Add Local Recipient \u0026gt; DBS Foreign Currency Corporate Account to add Webull as a payee. Then, input your previous Webull account details into the subsequent prompts. I made some minor changes to some details because the prompts wouldn\u0026rsquo;t let me pass otherwise:\nSWIFT Code: DBSSSGSGXXX (add XXX) Recipient\u0026rsquo;s full name: Webull Securities SG Pte Ltd (no brackets and dots) Full Address: DBS Singapore (to be within the character limit) After the payee is added successfully, click the payee to go to the transfer page: Make sure to select USD as your source account, and Input the remarks from your Webull app into the \u0026ldquo;Comments\u0026rdquo; box. Then, input the amount you want to transfer, click next, and follow the prompts to confirm the transfer.\nAfter you have completed the transfer, note down the reference number on the confirmation page for your reference: That\u0026rsquo;s it!üéâ In a few seconds, you should be able to receive a notification from Webull about the successful deposit without even having to \u0026ldquo;Notify Webull of Transfer Completion\u0026rdquo;. The amount reflected in Webull will be exactly the same as the amount you transfered, and neither side charges any transfer fee.\nWithdrawal On the Webull mobile app, go to your account section and click Withdraw \u0026gt; Withdraw USD. If you haven\u0026rsquo;t added your DBS bank account as a recipient, click \u0026ldquo;Add Bank Account\u0026rdquo; and fill up the details. The account type should be \u0026ldquo;Multi-Currency Account\u0026rdquo;. The bank number is your typical DBS account number that looks like \u0026ldquo;XXX-XXXXXX-X\u0026rdquo;. After that, choose the DBS multi-currency account as recipient: Input the amount you want and click \u0026ldquo;Submit Withdrawal Request\u0026rdquo;. Shortly, you should be able to see the exact amount being deducted from Webull and successfully deposited into your DBS USD account without any chargesüéâ: Summary Although not written explicitly, we are able to deposit and withdraw directly in USD between Webull and DBS multi-currency account without any charges. This is very handy if we already have some USD in our DBS bank account because we could skip the undesired currency exchange rate given by the broker.\nLeave a like if you think this is useful!\n","permalink":"https://cookiehoodie.github.io/blog/posts/investing/deposit-withdraw-webull-sg/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eRecently, I opened a Webull Singapore account and the experience has been good so far. However, although the fee structure for deposits and withdrawals in SGD (with a Singapore bank account) is clearly stated, it\u0026rsquo;s not so clear on depositing/withdrawing other currencies like USD using a multi-currency account.\u003c/p\u003e\n\u003cp\u003eSince Webull uses a DBS multi-currency account under the hood to hold our funds, supposedly if we deposit or withdraw USD using a DBS multi-currency account as well, there should be no charges. Sadly, there\u0026rsquo;s no official statement to verify the assumption, not to mention the scary \u0026ldquo;SGD20 charged by remitting bank for USD\u0026rdquo; mentioned on the \u003ca href=\"https://www.webull.com.sg/help/faq/1062-Are-there-any-withdrawal-fees\"\u003eofficial FAQ\u003c/a\u003e.\u003c/p\u003e","title":"Deposit and Withdraw USD on Webull Singapore With 0 Fee"},{"content":"Introduction Recently, I was building my portfolio site using React and the built-in create-react-app toolchain. The webpage worked well and I was able to deploy it on GitHub Pages with ease. However, create-react-app uses client-side rendering, which causes an obvious layout shift of the components when the page is first loaded or refreshed. Not a big deal, but it\u0026rsquo;s annoyingüò†.\nSince the webpage doesn\u0026rsquo;t change often, the best solution is to utilize static site generation (SSG), which pre-renders the page and thus eliminate the layout shift. Unfortunately, create-react-app doesn\u0026rsquo;t provide the functionality out of the box, and although there are some third-party packages such as react-snap that do the job, they are outdated and don\u0026rsquo;t support the latest React versions.\nTherefore, I decided to migrate to Next.js, a popular React framework for building web applications with server-side rendering and static site generation functionalities. The migration process is quite simple, and in this post I will guide you through how I did it, using my own site as example.\nGetting Started The complete code changes could be found in resources.\nMigrate to Next.js First, uninstall react-scripts and install Next.js:\n1 2 npm uninstall react-scripts npm install next Then, replace the scripts in package.json from react-scripts:\n1 2 3 4 5 6 7 // package.json { ‚ùå \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;react-scripts start\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;react-scripts build\u0026#34; } } to Next.js:\n1 2 3 4 5 6 7 8 9 // package.json { \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;next start\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;next build\u0026#34;, \u0026#34;export\u0026#34;: \u0026#34;next export\u0026#34;, \u0026#34;dev\u0026#34;: \u0026#34;next dev\u0026#34; } } Then, create a folder named pages in the root directory, and add a file named _document.js with the following content:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /* pages/_document.js */ import { Html, Head, Main, NextScript } from \u0026#34;next/document\u0026#34;; export default function Document() { return ( \u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; href=\u0026#34;/favicon.ico?\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;description\u0026#34; content=\u0026#34;Chin Hang\u0026#39;s Portfolio\u0026#34; /\u0026gt; \u0026lt;link rel=\u0026#34;apple-touch-icon\u0026#34; href=\u0026#34;/logo192.png\u0026#34; /\u0026gt; \u0026lt;link rel=\u0026#34;manifest\u0026#34; href=\u0026#34;/manifest.json\u0026#34; /\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;Main /\u0026gt; \u0026lt;NextScript /\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/Html\u0026gt; ); } The content in \u0026lt;Head\u0026gt; was copied from that of \u0026lt;head\u0026gt; in public/index.html. Note that we remove the %PUBLIC_URL% from the href:\n1 2 \u0026lt;!-- public/index.html --\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; href=\u0026#34;%PUBLIC_URL%/favicon.ico?\u0026#34; /\u0026gt; to:\n1 2 /* pages/_document.js */ \u0026lt;link rel=\u0026#34;icon\u0026#34; href=\u0026#34;/favicon.ico?\u0026#34; /\u0026gt; In short, this document is where we add the \u0026lt;head\u0026gt; code that are common to all pages, which Next.js will later pick up for page rendering. Also note that some other metadata such as title, viewport, and charSet are not placed here but rather in pages/_app.js, which will be created later. The \u0026lt;Main /\u0026gt; and \u0026lt;NextScript /\u0026gt; components are needed by Next.js and are not of our concern.\nInside the same pages folder, create another file named _app.js with the following content:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /* pages/_app.js */ import Head from \u0026#34;next/head\u0026#34;; export default function MyApp({ Component, pageProps }) { return ( \u0026lt;\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;meta charSet=\u0026#34;utf-8\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Chin Hang\u0026#39;s Portfolio\u0026lt;/title\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Component {...pageProps} /\u0026gt; \u0026lt;/\u0026gt; ); } In short, this document is the starting point where all the pages are initialized, and thus is useful for making changes that are common to all pages such as adding global css. Here, we put the rest of the metadata such as viewport and title as recommended by Next.js. I put the \u0026lt;title\u0026gt; here because my site is a single-page application and thus all pages share the same title.\nWe can now delete public/index.html since it\u0026rsquo;s not used anymore.\nRename the src folder to components, which is the convention used in Next.js.\nThen, we create another file named index.js inside the pages folder with the following content:\n1 2 3 4 5 6 /* pages/index.js */ import App from \u0026#34;../components/App\u0026#34;; export default function HomePage() { return (\u0026lt;App /\u0026gt;) } This file is the entry point to our home page, so I return my App here, which contains my home page elements. The content in this file should be similar to what the original src/index.js was doing, so if you have made any changes to it you should probably adapt it here.\nWe can now delete components/index.js (previously src/index.js) since it\u0026rsquo;s not used anymore.\nAdd the out and .next folders used by Next.js for output to .gitignore (if exists):\n1 2 3 4 5 6 7 # .gitignore ... /out .next ... Now, we can run our application and it should work the same as before:\n1 npm run dev If you want to generate the static assets for deployment, run:\n1 2 npm run build npm run export and the generated files will be placed in out/ folder.\nThat\u0026rsquo;s it! We have successfully migrated to Next.jsüéâ. Now it\u0026rsquo;s time to deploy our static site to production, which is GitHub Pages in our case.\nDeploy to GitHub Pages To streamline the deployment process, we make use of GitHub Action to generate the static assets and deploy it to GitHub Pages whenever the code is pushed to main. Create a file .github/workflows/gh-pages.yml with the following content:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # .github/workflows/gh-pages.yml name: GitHub Pages deploy on: push: branches: [main] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - uses: actions/setup-node@v3 with: node-version: 16 - name: Installing packages run: npm ci - name: Build static pages run: npm run build \u0026amp;\u0026amp; npm run export \u0026amp;\u0026amp; touch ./out/.nojekyll - name: Deploy üöÄ uses: JamesIves/github-pages-deploy-action@v4.4.1 with: token: ${{ secrets.GITHUB_TOKEN }} folder: out # The folder the action will deploy to Note that in the \u0026ldquo;build static pages\u0026rdquo; stage, we add a .nojekyll file into the out/ folder generated by build and export. This is because next export puts some static files in out/_next, and by default GitHub Pages ignores underscore-prefixed directories. Therefore, we add a .nojekyll file in the same level as the _next directory to avoid it being ignored. Then, in the \u0026ldquo;deploy\u0026rdquo; stage, we specify out/ as our folder so that its content will be copied to the root of our gh-pages branch.\nThe last step is to change the settings of our repo to serve the content from root of gh-pages branch as follows: Also, make sure you set the Settings \u0026gt; Actions \u0026gt; General \u0026gt; Workflow permissions to \u0026ldquo;Read and write permissions\u0026rdquo; so that GitHub Action is allowed to help us deploy. Now, every time we push our code to the main branch of our repository, our website will be deployed automaticallyüëè.\nMore About the Migration The above migration steps work perfectly for my single-page portfolio site, but there could be many more configurations to do depending on how complex your site is. For example, if your site has multiple routes or has problems resolving image url in production, there may need to be more changes such as adding environment variables. Read more on the official guide if you are having issues.\nExtra: Faster Font Loading Although the layout shift due to client-side rendering is now solved with static site generation, there is still one thing that bugs me ‚Äî the font. Because I\u0026rsquo;m using Google Font, there is some delay in fetching the font from Google\u0026rsquo;s CDN, which causes the browser to use the default font before switching to my font only when it\u0026rsquo;s fully fetched. That causes a visible font/layout change to my landing page as wellüò†.\nLuckily, Next.js provides built-in support for automatic self-hosting for any font file. This means we can load web fonts much faster and minimizes the visible effect of layout shift. To do so, we just need to:\nImport the next/font package in our code, Declare the font we want, and Use it to set our font family. To demonstrate, for my site, I changed from using Material UI (MUI) fontsource:\n1 2 3 4 5 6 7 8 9 10 11 // MUI fontsource ‚ùå import \u0026#34;@fontsource/dm-sans\u0026#34;; import { ThemeProvider, createTheme } from \u0026#34;@mui/material/styles\u0026#34;; const simpleTheme = createTheme({ typography: { allVariants: { fontFamily: \u0026#34;DM Sans, sans-serif\u0026#34;, }, }, }); to next/font:\n1 2 3 4 5 6 7 8 9 10 11 12 // next/font import { DM_Sans } from \u0026#39;next/font/google\u0026#39;; import { ThemeProvider, createTheme } from \u0026#34;@mui/material/styles\u0026#34;; const dm_sans = DM_Sans({ weight: [\u0026#34;400\u0026#34;], subsets: [\u0026#39;latin\u0026#39;] }); const simpleTheme = createTheme({ typography: { allVariants: { fontFamily: dm_sans.style.fontFamily, }, }, }); By simply using the font package provided by Next.js, our font will be automatically self-hosted, which improves the load time by multiple magnitudes.\nSummary We have gone through how to migrate our React application from create-react-app to Next.js so that we could do static site generation and speed up our website. We have also learned how to deploy our static site to GitHub Pages, as well as how to utilize font package from Next.js for faster font loading. If you are facing similar problem as me, the migration is well worth it.\nResources See the code changes in effect: https://github.com/CookieHoodie/cookiehoodie.github.io/compare/8442a7e57a350b1e9981eeb29be239a600e4b6f0...417d928e1e84730475cbc387d96bb3bb2cea9985\n","permalink":"https://cookiehoodie.github.io/blog/posts/tech/react-to-nextjs/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eRecently, I was building my \u003ca href=\"https://cookiehoodie.github.io\"\u003eportfolio site\u003c/a\u003e using React and the built-in create-react-app toolchain. The webpage worked well and I was able to deploy it on GitHub Pages with ease. However, create-react-app uses client-side rendering, which causes an obvious layout shift of the components when the page is first loaded or refreshed. Not a big deal, but it\u0026rsquo;s annoyingüò†.\u003c/p\u003e\n\u003cp\u003eSince the webpage doesn\u0026rsquo;t change often, the best solution is to utilize static site generation (SSG), which pre-renders the page and thus eliminate the layout shift. Unfortunately, create-react-app doesn\u0026rsquo;t provide the functionality out of the box, and although there are some third-party packages such as react-snap that do the job, they are outdated and don\u0026rsquo;t support the latest React versions.\u003c/p\u003e","title":"Migrate From create-react-app to Next.js for Static Site Generation"},{"content":"Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed.\nFor those of you who have used Docker before, I think we could all agree that it is a very handy tool to manage dependencies. We just need to package everything that our application needs into the Docker image, then we could simply run our application using Docker in any environment.\nNormally, Docker is used for deployment, but today we are going to utilize its power to setup our development environment to eliminate the need to install any tools locally. We will use a powerful Visual Studio Code (VSCode) extension, Dev Containers, to achieve the seamless development process.\nPrerequisites Before we begin, make sure that you have the following software installed:\nDocker: https://www.docker.com/get-started. Visual Studio Code: https://code.visualstudio.com/. Dev Containers extension for VSCode: https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers. Getting Started In short, Dev Containers mounts our project folder into a Docker container, so we could then run our project using the dependencies that reside in the container.\nTherefore, a typical development workflow looks like this:\nWrite a Dockerfile that contains all dependencies needed to run our application. Run Dev Containers, which will create a Docker container using the Dockerfile we created and mount our project folder into it. Modify our source code on VSCode and run our application on VSCode terminal which is connected to the container. To demonstrate, we will use this workflow to develop and run a Node.js web application. The final code could be found in Resources at the end of the blog.\nSetting up VSCode with Dev Containers First, create a new folder for the project. Launch VSCode and click File \u0026gt; Open Folder to open the folder just created. ‚ö†Ô∏èIf your Docker is installed in Windows WSL, you need to download the WSL extentsion. Then, open the Command Palette in VSCode by pressing Ctrl+Shift+P, and type and choose \u0026ldquo;WSL: Open Folder in WSL\u0026rdquo; instead. Create a Dockerfile in the project folder with the following content: 1 FROM node:18-alpine This creates an environment with Node.js runtime and change our starting directory to /app. Open the Command Palette in VSCode by pressing Ctrl+Shift+P (Windows, Linux) or Command+Shift+P (Mac). Type and choose \u0026ldquo;Dev Containers: Add Dev Container Configuration Files.\u0026rdquo; In the next prompt, choose \u0026ldquo;From Dockerfile.\u0026rdquo; Then in the Select Features prompt, press \u0026ldquo;OK\u0026rdquo; without selecting any additional feature. A devcontainer.json will then be created under the .devcontainer folder. build.context sets the path that the Docker build should be run from relative to devcontainer.json, which in this case is where our Dockerfile is located. build.dockerfile points to the location of a Dockerfile that defines the contents of the container, which we defined. Open the Command Palette again and choose \u0026ldquo;Dev Containers: Rebuild and Reopen in Container\u0026rdquo; The workspace will be reopened in the container, and if we press Ctrl+` to bring up the integrated terminal, we can see that we are inside the container environment! By default, Dev Containers mounts our project folder to /workspaces/{project_name} in the container. Thus, any file we create inside the virtual environment will also be reflected in our local folder.\nBuilding our Application In the terminal, run: 1 npm init and keep pressing Enter until the end of the prompt. Install Express framework: 1 npm install express Create a file named index.js with the following content: 1 2 3 4 5 6 7 8 9 10 11 const express = require(\u0026#39;express\u0026#39;) const app = express() const port = 3000 app.get(\u0026#39;/\u0026#39;, (req, res) =\u0026gt; { res.send(\u0026#39;Hello World!\u0026#39;) }) app.listen(port, () =\u0026gt; { console.log(`Example app listening on port ${port}`) }) Start the server: 1 node index.js Open a local browser and visit http://localhost:3000 to see the running server. Note that VSCode automatically helps us map local port 3000 to that of the container, so we don\u0026rsquo;t need to configure it explicitly. And there we go! We have successfully developed and run a Node.js application without having to installed the tools locally.\nFinishing Off To make the tutorial complete, we should also package our application properly for deployment/distribution later. Update the Dockerfile with the following content:\n1 2 3 4 5 6 7 8 9 10 FROM node:18-alpine WORKDIR /app COPY package*.json ./ RUN npm install COPY . . EXPOSE 3000 CMD [\u0026#34;node\u0026#34;, \u0026#34;index.js\u0026#34;] Then, in a local terminal, we could then run our program using the following commands:\n1 2 3 4 # Inside the project directory docker build -t dev-container . # Make sure the previous application in VSCode is stopped before running this docker run --rm -p 3000:3000 dev-container Now, our application is ready to be shipped.\nSome Notes We use the same Dockerfile for both development and deployment, but you could choose to use different files to avoid confusion. However, that comes with the cost of potential descrepency between development and deployment. There are a lot more configurations that you could do with the container environment through devcontainer.json according to your needs. Read the official documentation to learn more. If we create files through a dev container, there could be some permission issues when accessing them locally. Git commands might encounter permissions issues as well. To resolve them, we may have to manually change the files permission or go through the pain of setting up a non-root user. Summary We have demonstrated how to use Dev Containers and VSCode to develop and package a web application. It is a very powerful tool that helps us manage dependencies which we otherwise have to manage on our local machine ourselves. If you are a big fan of minimizing local tools installation like me, you should definitely check this out.\nResources Code for this tutorial: https://github.com/CookieHoodie/tutorials/tree/main/dev_containers ","permalink":"https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eWhenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed.\u003c/p\u003e","title":"Using Docker with VSCode for Local Development"}]