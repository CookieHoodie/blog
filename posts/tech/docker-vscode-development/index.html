<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using Docker with VSCode for Local Development | Chin Hang's Blog</title><meta name=keywords content><meta name=description content="Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed."><meta name=author content><link rel=canonical href=https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://cookiehoodie.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cookiehoodie.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cookiehoodie.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://cookiehoodie.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://cookiehoodie.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-LGTT6WLGH5"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LGTT6WLGH5",{anonymize_ip:!1})}</script><meta property="og:title" content="Using Docker with VSCode for Local Development"><meta property="og:description" content="Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed."><meta property="og:type" content="article"><meta property="og:url" content="https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/"><meta property="og:image" content="https://cookiehoodie.github.io/blog/images/dev-containers-extension.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-16T10:45:45+08:00"><meta property="article:modified_time" content="2023-02-16T10:45:45+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cookiehoodie.github.io/blog/images/dev-containers-extension.png"><meta name=twitter:title content="Using Docker with VSCode for Local Development"><meta name=twitter:description content="Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Categories","item":"https://cookiehoodie.github.io/blog/posts/"},{"@type":"ListItem","position":3,"name":"üë®‚ÄçüíªTech","item":"https://cookiehoodie.github.io/blog/posts/tech/"},{"@type":"ListItem","position":4,"name":"Using Docker with VSCode for Local Development","item":"https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using Docker with VSCode for Local Development","name":"Using Docker with VSCode for Local Development","description":"Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed.","keywords":[],"articleBody":"Introduction Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed.\nFor those of you who have used Docker before, I think we could all agree that it is a very handy tool to manage dependencies. We just need to package everything that our application needs into the Docker image, then we could simply run our application using Docker in any environment.\nNormally, Docker is used for deployment, but today we are going to utilize its power to setup our development environment to eliminate the need to install any tools locally. We will use a powerful Visual Studio Code (VSCode) extension, Dev Containers, to achieve the seamless development process.\nPrerequisites Before we begin, make sure that you have the following software installed:\nDocker: https://www.docker.com/get-started. Visual Studio Code: https://code.visualstudio.com/. Dev Containers extension for VSCode: https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers. Getting Started In short, Dev Containers mounts our project folder into a Docker container, so we could then run our project using the dependencies that reside in the container.\nTherefore, a typical development workflow looks like this:\nWrite a Dockerfile that contains all dependencies needed to run our application. Run Dev Containers, which will create a Docker container using the Dockerfile we created and mount our project folder into it. Modify our source code on VSCode and run our application on VSCode terminal which is connected to the container. To demonstrate, we will use this workflow to develop and run a Node.js web application. The final code could be found in Resources at the end of the blog.\nSetting up VSCode with Dev Containers First, create a new folder for the project. Launch VSCode and click File \u003e Open Folder to open the folder just created. ‚ö†Ô∏èIf your Docker is installed in Windows WSL, you need to download the WSL extentsion. Then, open the Command Palette in VSCode by pressing Ctrl+Shift+P, and type and choose ‚ÄúWSL: Open Folder in WSL‚Äù instead. Create a Dockerfile in the project folder with the following content: 1 FROM node:18-alpine This creates an environment with Node.js runtime and change our starting directory to /app. Open the Command Palette in VSCode by pressing Ctrl+Shift+P (Windows, Linux) or Command+Shift+P (Mac). Type and choose ‚ÄúDev Containers: Add Dev Container Configuration Files.‚Äù In the next prompt, choose ‚ÄúFrom Dockerfile.‚Äù Then in the Select Features prompt, press ‚ÄúOK‚Äù without selecting any additional feature. A devcontainer.json will then be created under the .devcontainer folder. build.context sets the path that the Docker build should be run from relative to devcontainer.json, which in this case is where our Dockerfile is located. build.dockerfile points to the location of a Dockerfile that defines the contents of the container, which we defined. Open the Command Palette again and choose ‚ÄúDev Containers: Rebuild and Reopen in Container‚Äù The workspace will be reopened in the container, and if we press Ctrl+` to bring up the integrated terminal, we can see that we are inside the container environment! By default, Dev Containers mounts our project folder to /workspaces/{project_name} in the container. Thus, any file we create inside the virtual environment will also be reflected in our local folder.\nBuilding our Application In the terminal, run: 1 npm init and keep pressing Enter until the end of the prompt. Install Express framework: 1 npm install express Create a file named index.js with the following content: 1 2 3 4 5 6 7 8 9 10 11 const express = require('express') const app = express() const port = 3000 app.get('/', (req, res) =\u003e { res.send('Hello World!') }) app.listen(port, () =\u003e { console.log(`Example app listening on port ${port}`) }) Start the server: 1 node index.js Open a local browser and visit http://localhost:3000 to see the running server. Note that VSCode automatically helps us map local port 3000 to that of the container, so we don‚Äôt need to configure it explicitly. And there we go! We have successfully developed and run a Node.js application without having to installed the tools locally.\nFinishing Off To make the tutorial complete, we should also package our application properly for deployment/distribution later. Update the Dockerfile with the following content:\n1 2 3 4 5 6 7 8 9 10 FROM node:18-alpine WORKDIR /app COPY package*.json ./ RUN npm install COPY . . EXPOSE 3000 CMD [\"node\", \"index.js\"] Then, in a local terminal, we could then run our program using the following commands:\n1 2 3 4 # Inside the project directory docker build -t dev-container . # Make sure the previous application in VSCode is stopped before running this docker run --rm -p 3000:3000 dev-container Now, our application is ready to be shipped.\nSome Notes We use the same Dockerfile for both development and deployment, but you could choose to use different files to avoid confusion. However, that comes with the cost of potential descrepency between development and deployment. There are a lot more configurations that you could do with the container environment through devcontainer.json according to your needs. Read the official documentation to learn more. If we create files through a dev container, there could be some permission issues when accessing them locally. Git commands might encounter permissions issues as well. To resolve them, we may have to manually change the files permission or go through the pain of setting up a non-root user. Summary We have demonstrated how to use Dev Containers and VSCode to develop and package a web application. It is a very powerful tool that helps us manage dependencies which we otherwise have to manage on our local machine ourselves. If you are a big fan of minimizing local tools installation like me, you should definitely check this out.\nResources Code for this tutorial: https://github.com/CookieHoodie/tutorials/tree/main/dev_containers ","wordCount":"1012","inLanguage":"en","image":"https://cookiehoodie.github.io/blog/images/dev-containers-extension.png","datePublished":"2023-02-16T10:45:45+08:00","dateModified":"2023-02-16T10:45:45+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/"},"publisher":{"@type":"Organization","name":"Chin Hang's Blog","logo":{"@type":"ImageObject","url":"https://cookiehoodie.github.io/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://cookiehoodie.github.io/blog accesskey=h title="Chin Hang's Blog (Alt + H)"><img src=https://cookiehoodie.github.io/blog/avatar.png alt aria-label=logo height=30>Chin Hang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://cookiehoodie.github.io/blog/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://cookiehoodie.github.io/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://cookiehoodie.github.io/ title=Portfolio><span>Portfolio</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cookiehoodie.github.io/blog>Home</a>&nbsp;¬ª&nbsp;<a href=https://cookiehoodie.github.io/blog/posts/>Categories</a>&nbsp;¬ª&nbsp;<a href=https://cookiehoodie.github.io/blog/posts/tech/>üë®‚ÄçüíªTech</a></div><h1 class=post-title>Using Docker with VSCode for Local Development</h1><div class=post-meta><span title='2023-02-16 10:45:45 +0800 +0800'>February 16, 2023</span>&nbsp;¬∑&nbsp;5 min</div></header><figure class=entry-cover><img loading=lazy srcset="https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension_hu4db68c1c50fd2dd3009c14280e43d3a4_56961_360x0_resize_box_3.png 360w ,https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension_hu4db68c1c50fd2dd3009c14280e43d3a4_56961_480x0_resize_box_3.png 480w ,https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension_hu4db68c1c50fd2dd3009c14280e43d3a4_56961_720x0_resize_box_3.png 720w ,https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension_hu4db68c1c50fd2dd3009c14280e43d3a4_56961_1080x0_resize_box_3.png 1080w ,https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension.png 1185w" sizes="(min-width: 768px) 720px, 100vw" src=https://cookiehoodie.github.io/blog/posts/tech/docker-vscode-development/images/dev-containers-extension.png alt="Dev Containers Extension" width=1185 height=356></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#prerequisites aria-label=Prerequisites>Prerequisites</a></li><li><a href=#getting-started aria-label="Getting Started">Getting Started</a><ul><li><a href=#setting-up-vscode-with-dev-containers aria-label="Setting up VSCode with Dev Containers">Setting up VSCode with Dev Containers</a></li><li><a href=#building-our-application aria-label="Building our Application">Building our Application</a></li><li><a href=#finishing-off aria-label="Finishing Off">Finishing Off</a></li><li><a href=#some-notes aria-label="Some Notes">Some Notes</a></li></ul></li><li><a href=#summary aria-label=Summary>Summary</a></li><li><a href=#resources aria-label=Resources>Resources</a></li></ul></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Whenever we want to start working on a new project with new tools or frameworks, the first step is always to install the dependencies for local development. However, the installation process could be painful especially if different versions of existing tools are needed, forcing us to have multiple versions that eat up the storage space on our device. Not to mention, the installed tools could be located all over the place, making it hard to locate and uninstall them when they are no longer needed.</p><p>For those of you who have used Docker before, I think we could all agree that it is a very handy tool to manage dependencies. We just need to package everything that our application needs into the Docker image, then we could simply run our application using Docker in any environment.</p><p>Normally, Docker is used for deployment, but today we are going to utilize its power to setup our development environment to eliminate the need to install any tools locally. We will use a powerful Visual Studio Code (VSCode) extension, <em>Dev Containers</em>, to achieve the seamless development process.</p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><p>Before we begin, make sure that you have the following software installed:</p><ul><li><strong>Docker</strong>: <a href=https://www.docker.com/get-started>https://www.docker.com/get-started</a>.</li><li><strong>Visual Studio Code</strong>: <a href=https://code.visualstudio.com/>https://code.visualstudio.com/</a>.</li><li><strong>Dev Containers extension for VSCode</strong>: <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers</a>.</li></ul><h2 id=getting-started>Getting Started<a hidden class=anchor aria-hidden=true href=#getting-started>#</a></h2><p>In short, Dev Containers mounts our project folder into a Docker container, so we could then run our project using the dependencies that reside in the container.</p><p><img loading=lazy src=images/architecture-containers.png alt="Dev Containers Architecture"></p><p>Therefore, a typical development workflow looks like this:</p><ol><li>Write a Dockerfile that contains all dependencies needed to run our application.</li><li>Run Dev Containers, which will create a Docker container using the Dockerfile we created and mount our project folder into it.</li><li>Modify our source code on VSCode and run our application on VSCode terminal which is connected to the container.</li></ol><p>To demonstrate, we will use this workflow to develop and run a Node.js web application. The final code could be found in <a href=#resources>Resources</a> at the end of the blog.</p><h3 id=setting-up-vscode-with-dev-containers>Setting up VSCode with Dev Containers<a hidden class=anchor aria-hidden=true href=#setting-up-vscode-with-dev-containers>#</a></h3><ol><li>First, create a new folder for the project.</li><li>Launch VSCode and click <code>File > Open Folder</code> to open the folder just created.<ul><li>‚ö†Ô∏èIf your Docker is installed in Windows WSL, you need to download the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">WSL extentsion</a>. Then, open the Command Palette in VSCode by pressing <code>Ctrl+Shift+P</code>, and type and choose &ldquo;WSL: Open Folder in WSL&rdquo; instead.</li></ul></li><li>Create a <code>Dockerfile</code> in the project folder with the following content:<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:18-alpine</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></td></tr></table></div></div>This creates an environment with Node.js runtime and change our starting directory to <code>/app</code>.</li><li>Open the Command Palette in VSCode by pressing <code>Ctrl+Shift+P</code> (Windows, Linux) or <code>Command+Shift+P</code> (Mac).</li><li>Type and choose &ldquo;Dev Containers: Add Dev Container Configuration Files.&rdquo; In the next prompt, choose &ldquo;From Dockerfile.&rdquo;
<img loading=lazy src=images/dev-containers-configuration.png alt="Dev Containers Configuration"></li><li>Then in the Select Features prompt, press &ldquo;OK&rdquo; without selecting any additional feature.
<img loading=lazy src=images/dev-containers-select-features.png alt="Dev Containers Select Features"></li><li>A <code>devcontainer.json</code> will then be created under the .devcontainer folder.
<img loading=lazy src=images/dev-containers-json.png alt=devcontainer.json><ul><li><code>build.context</code> sets the path that the Docker build should be run from relative to <code>devcontainer.json</code>, which in this case is where our Dockerfile is located.</li><li><code>build.dockerfile</code> points to the location of a Dockerfile that defines the contents of the container, which we defined.</li></ul></li><li>Open the Command Palette again and choose &ldquo;Dev Containers: Rebuild and Reopen in Container&rdquo;</li><li>The workspace will be reopened in the container, and if we press <code>Ctrl+`</code> to bring up the integrated terminal, we can see that we are inside the container environment!</li></ol><p>By default, Dev Containers mounts our project folder to <code>/workspaces/{project_name}</code> in the container. Thus, any file we create inside the virtual environment will also be reflected in our local folder.</p><h3 id=building-our-application>Building our Application<a hidden class=anchor aria-hidden=true href=#building-our-application>#</a></h3><ol><li>In the terminal, run:<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm init
</span></span></code></pre></td></tr></table></div></div>and keep pressing <code>Enter</code> until the end of the prompt.</li><li>Install Express framework:<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install express
</span></span></code></pre></td></tr></table></div></div></li><li>Create a file named <code>index.js</code> with the following content:<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>express</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;express&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>express</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/&#39;</span>, (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>send</span>(<span style=color:#e6db74>&#39;Hello World!&#39;</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>, () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Example app listening on port </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>port</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></td></tr></table></div></div></li><li>Start the server:<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>node index.js
</span></span></code></pre></td></tr></table></div></div></li><li>Open a local browser and visit <code>http://localhost:3000</code> to see the running server.<ul><li>Note that VSCode automatically helps us map local port 3000 to that of the container, so we don&rsquo;t need to configure it explicitly.</li></ul></li></ol><p>And there we go! We have successfully developed and run a Node.js application without having to installed the tools locally.</p><h3 id=finishing-off>Finishing Off<a hidden class=anchor aria-hidden=true href=#finishing-off>#</a></h3><p>To make the tutorial complete, we should also package our application properly for deployment/distribution later. Update the <code>Dockerfile</code> with the following content:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:18-alpine</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package*.json ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm install<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 3000</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;node&#34;</span>, <span style=color:#e6db74>&#34;index.js&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></td></tr></table></div></div><p>Then, in a <strong>local</strong> terminal, we could then run our program using the following commands:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Inside the project directory</span>
</span></span><span style=display:flex><span>docker build -t dev-container .
</span></span><span style=display:flex><span><span style=color:#75715e># Make sure the previous application in VSCode is stopped before running this</span>
</span></span><span style=display:flex><span>docker run --rm -p 3000:3000 dev-container
</span></span></code></pre></td></tr></table></div></div><p>Now, our application is ready to be shipped.</p><h3 id=some-notes>Some Notes<a hidden class=anchor aria-hidden=true href=#some-notes>#</a></h3><ul><li>We use the same Dockerfile for both development and deployment, but you could choose to use different files to avoid confusion. However, that comes with the cost of potential descrepency between development and deployment.</li><li>There are a lot more configurations that you could do with the container environment through <code>devcontainer.json</code> according to your needs. Read the <a href=https://code.visualstudio.com/docs/devcontainers/containers>official documentation</a> to learn more.</li><li>If we create files through a dev container, there could be some permission issues when accessing them locally. Git commands might encounter permissions issues as well. To resolve them, we may have to manually change the files permission or go through the pain of <a href=https://code.visualstudio.com/remote/advancedcontainers/add-nonroot-user>setting up a non-root user</a>.</li></ul><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>We have demonstrated how to use Dev Containers and VSCode to develop and package a web application. It is a very powerful tool that helps us manage dependencies which we otherwise have to manage on our local machine ourselves. If you are a big fan of minimizing local tools installation like me, you should definitely check this out.</p><h2 id=resources>Resources<a hidden class=anchor aria-hidden=true href=#resources>#</a></h2><ul><li>Code for this tutorial: <a href=https://github.com/CookieHoodie/tutorials/tree/main/dev_containers>https://github.com/CookieHoodie/tutorials/tree/main/dev_containers</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://cookiehoodie.github.io/blog/posts/tech/react-to-nextjs/><span class=title>¬´ Prev</span><br><span>Migrate From create-react-app to Next.js for Static Site Generation</span></a></nav></footer><div class=giscus></div><script>function getGiscusTheme(){const e=localStorage.getItem("pref-theme"),t=e==null||e=="light"?"light":"dark";return t}function setGiscusTheme(){function e(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}e({setConfig:{theme:getGiscusTheme()=="light"?"dark":"light"}})}const attrs={src:"https://giscus.app/client.js","data-repo":"CookieHoodie/blog","data-repo-id":"R_kgDOI_cFQw","data-category":"Blog Comments","data-category-id":"DIC_kwDOI_cFQ84CUTtT","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getGiscusTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(attrs).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.body.appendChild(giscusScript);const toggle=document.querySelector("#theme-toggle");toggle&&toggle.addEventListener("click",setGiscusTheme)</script><noscript>Please enable JavaScript to view the comments</noscript></article></main><footer class=footer><span>&copy; 2023 <a href=https://cookiehoodie.github.io/blog>Chin Hang's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>